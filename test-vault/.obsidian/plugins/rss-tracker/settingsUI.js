import { Setting, PluginSettingTab } from "obsidian";
import { DEFAULT_SETTINGS } from "./settings";
class RSSTrackerSettingBase extends Setting {
    constructor(settingsTab) {
        super(settingsTab.containerEl);
        this.settingsTab = settingsTab;
    }
    get plugin() {
        return this.settingsTab.settings.plugin;
    }
    get settings() {
        return this.settingsTab.settings;
    }
}
class RSSTagmapNameSetting extends RSSTrackerSettingBase {
    constructor(settingsTab) {
        super(settingsTab);
        this
            .setName('RSS tag map name')
            .setDesc('THe name of the tag map Markdown file in the RSS Home folder which contains a table mapping tags found in feeds to tags in the local knowledge graph.')
            .addText(ta => {
            ta
                .setPlaceholder(DEFAULT_SETTINGS.rssTagmapName)
                .onChange(value => {
                this.settings.rssTagmapName = value;
            });
            if (this.settings.rssTagmapName !== DEFAULT_SETTINGS.rssTagmapName) {
                ta.setValue(this.settings.rssTagmapName);
            }
        })
            .addButton(btn => {
            btn
                .setIcon("reset")
                .setTooltip("Reset the RSS Tag Map name to default")
                .onClick(evt => {
                this.settings.rssTagmapName = DEFAULT_SETTINGS.rssTagmapName;
            });
        });
    }
}
class RSSDashboardNameSetting extends RSSTrackerSettingBase {
    constructor(settingsTab) {
        super(settingsTab);
        this
            .setName('RSS Dashboard Name')
            .setDesc('THe name of the dashboard Markdown file in the RSS Home folder which contains a content map of the subscribed RSS feeds.')
            .addText(ta => {
            ta
                .setPlaceholder(DEFAULT_SETTINGS.rssDashboardName)
                .onChange(value => {
                this.settings.rssDashboardName = value;
            });
            if (this.settings.rssDashboardName !== DEFAULT_SETTINGS.rssDashboardName) {
                ta.setValue(this.settings.rssDashboardName);
            }
        })
            .addButton(btn => {
            btn
                .setIcon("reset")
                .setTooltip("Reset the RSS dashboard name to default")
                .onClick(evt => {
                this.settings.rssDashboardName = DEFAULT_SETTINGS.rssDashboardName;
            });
        });
    }
}
class RSSautoUpdateSetting extends RSSTrackerSettingBase {
    constructor(settingsTab) {
        super(settingsTab);
        this
            .setName('Automatic RSS Updates')
            .setDesc('Turn on to update RSS feeds periodically in the background.')
            .addToggle(tg => {
            tg.setValue(this.settings.autoUpdateFeeds);
            tg.onChange(evt => {
                this.settings.autoUpdateFeeds = tg.getValue();
            });
        });
    }
}
class RSSHomeSetting extends RSSTrackerSettingBase {
    constructor(settingsTab) {
        super(settingsTab);
        this
            .setName("RSS feed base (home) location")
            .setDesc("The base folder containing RSS feeds, dashboards and assets.")
            .addText(ta => {
            ta
                .setPlaceholder(DEFAULT_SETTINGS.rssHome)
                .onChange(value => {
                this.settings.rssHome = value;
            });
            if (this.settings.rssHome !== DEFAULT_SETTINGS.rssHome) {
                ta.setValue(this.settings.rssHome);
            }
        })
            .addButton(btn => {
            btn
                .setIcon("reset")
                .setTooltip("Reset the RSS home location to default")
                .onClick(evt => {
                this.settings.rssHome = DEFAULT_SETTINGS.rssHome;
            });
        });
    }
}
class RSSFeedFolderSetting extends RSSTrackerSettingBase {
    constructor(settingsTab) {
        super(settingsTab);
        this
            .setName("RSS feed location")
            .setDesc("The folder containing all RSS feeds.")
            .addText(ta => {
            ta
                .setPlaceholder(DEFAULT_SETTINGS.rssFeedFolderName)
                .onChange(value => {
                this.settings.rssFeedFolderName = value;
            });
            if (this.settings.rssFeedFolderName !== DEFAULT_SETTINGS.rssFeedFolderName) {
                ta.setValue(this.settings.rssFeedFolderName);
            }
        })
            .addButton(btn => {
            btn
                .setIcon("reset")
                .setTooltip("Reset the RSS feed location to default")
                .onClick(evt => {
                this.settings.rssFeedFolderName = DEFAULT_SETTINGS.rssFeedFolderName;
            });
        });
    }
}
class RSSCollectionsFolderSetting extends RSSTrackerSettingBase {
    constructor(settingsTab) {
        super(settingsTab);
        this
            .setName("RSS feed collections location")
            .setDesc("The folder containing all RSS feed collections.")
            .addText(ta => {
            ta
                .setPlaceholder(DEFAULT_SETTINGS.rssCollectionsFolderName)
                .onChange(value => {
                this.settings.rssCollectionsFolderName = value;
            });
            if (this.settings.rssCollectionsFolderName !== DEFAULT_SETTINGS.rssCollectionsFolderName) {
                ta.setValue(this.settings.rssCollectionsFolderName);
            }
        })
            .addButton(btn => {
            btn
                .setIcon("reset")
                .setTooltip("Reset the RSS feed collections location to default")
                .onClick(evt => {
                this.settings.rssCollectionsFolderName = DEFAULT_SETTINGS.rssCollectionsFolderName;
            });
        });
    }
}
class RSSTopicsFolderSetting extends RSSTrackerSettingBase {
    constructor(settingsTab) {
        super(settingsTab);
        this
            .setName("RSS topics location")
            .setDesc("The folder containing all RSS topics.")
            .addText(ta => {
            ta
                .setPlaceholder(DEFAULT_SETTINGS.rssTopicsFolderName)
                .onChange(value => {
                this.settings.rssTopicsFolderName = value;
            });
            if (this.settings.rssTopicsFolderName !== DEFAULT_SETTINGS.rssTopicsFolderName) {
                ta.setValue(this.settings.rssTopicsFolderName);
            }
        })
            .addButton(btn => {
            btn
                .setIcon("reset")
                .setTooltip("Reset the RSS topics location to default")
                .onClick(evt => {
                this.settings.rssTopicsFolderName = DEFAULT_SETTINGS.rssTopicsFolderName;
            });
        });
    }
}
class RSSDefaultItemLimitSetting extends RSSTrackerSettingBase {
    constructor(settingsTab) {
        super(settingsTab);
        this
            .setName("Default RSS item limit")
            .setDesc("The maximum items per feed.")
            .addText(ta => {
            ta
                .setPlaceholder(DEFAULT_SETTINGS.defaultItemLimit.toString())
                .onChange(value => {
                this.settings.defaultItemLimit = parseInt(value);
            });
            if (this.settings.defaultItemLimit !== DEFAULT_SETTINGS.defaultItemLimit) {
                ta.setValue(this.settings.defaultItemLimit.toString());
            }
        })
            .addButton(btn => {
            btn
                .setIcon("reset")
                .setTooltip("Reset the RSS item limit default")
                .onClick(evt => {
                this.settings.defaultItemLimit = DEFAULT_SETTINGS.defaultItemLimit;
            });
        });
    }
}
export class RSSTrackerSettingTab extends PluginSettingTab {
    constructor(settings) {
        super(settings.app, settings.plugin);
        this.settings = settings;
    }
    display() {
        const { containerEl } = this;
        containerEl.empty();
        const frag = containerEl.doc.createDocumentFragment();
        new RSSHomeSetting(this);
        new RSSFeedFolderSetting(this);
        new RSSCollectionsFolderSetting(this);
        new RSSTopicsFolderSetting(this);
        new RSSautoUpdateSetting(this);
        new RSSDashboardNameSetting(this);
        new RSSTagmapNameSetting(this);
        new RSSDefaultItemLimitSetting(this);
    }
    hide() {
        this.settings.commit();
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2V0dGluZ3NVSS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL3NyYy9zZXR0aW5nc1VJLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSxVQUFVLENBQUM7QUFFckQsT0FBTyxFQUFFLGdCQUFnQixFQUFzQixNQUFNLFlBQVksQ0FBQztBQUVsRSxNQUFlLHFCQUFzQixTQUFRLE9BQU87SUFXbkQsWUFBWSxXQUFpQztRQUM1QyxLQUFLLENBQUMsV0FBVyxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBQy9CLElBQUksQ0FBQyxXQUFXLEdBQUcsV0FBVyxDQUFDO0lBQ2hDLENBQUM7SUFYRCxJQUFjLE1BQU07UUFDbkIsT0FBTyxJQUFJLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUM7SUFDekMsQ0FBQztJQUVELElBQWMsUUFBUTtRQUNyQixPQUFPLElBQUksQ0FBQyxXQUFXLENBQUMsUUFBUSxDQUFDO0lBQ2xDLENBQUM7Q0FNRDtBQUVELE1BQU0sb0JBQXFCLFNBQVEscUJBQXFCO0lBQ3ZELFlBQVksV0FBaUM7UUFDNUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBQ25CLElBQUk7YUFDRixPQUFPLENBQUMsa0JBQWtCLENBQUM7YUFDM0IsT0FBTyxDQUFDLHVKQUF1SixDQUFDO2FBQ2hLLE9BQU8sQ0FBQyxFQUFFLENBQUMsRUFBRTtZQUNiLEVBQUU7aUJBQ0EsY0FBYyxDQUFDLGdCQUFnQixDQUFDLGFBQWEsQ0FBQztpQkFDOUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxFQUFFO2dCQUNqQixJQUFJLENBQUMsUUFBUSxDQUFDLGFBQWEsR0FBRyxLQUFLLENBQUM7WUFDckMsQ0FBQyxDQUFDLENBQUM7WUFDSixJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsYUFBYSxLQUFLLGdCQUFnQixDQUFDLGFBQWEsRUFBRTtnQkFDbkUsRUFBRSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLGFBQWEsQ0FBQyxDQUFBO2FBQ3hDO1FBQ0YsQ0FBQyxDQUFDO2FBQ0QsU0FBUyxDQUFDLEdBQUcsQ0FBQyxFQUFFO1lBQ2hCLEdBQUc7aUJBQ0QsT0FBTyxDQUFDLE9BQU8sQ0FBQztpQkFDaEIsVUFBVSxDQUFDLHVDQUF1QyxDQUFDO2lCQUNuRCxPQUFPLENBQUMsR0FBRyxDQUFDLEVBQUU7Z0JBQ2QsSUFBSSxDQUFDLFFBQVEsQ0FBQyxhQUFhLEdBQUcsZ0JBQWdCLENBQUMsYUFBYSxDQUFDO1lBQzlELENBQUMsQ0FBQyxDQUFBO1FBQ0osQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDO0NBQ0Q7QUFFRCxNQUFNLHVCQUF3QixTQUFRLHFCQUFxQjtJQUMxRCxZQUFZLFdBQWlDO1FBQzVDLEtBQUssQ0FBQyxXQUFXLENBQUMsQ0FBQztRQUNuQixJQUFJO2FBQ0YsT0FBTyxDQUFDLG9CQUFvQixDQUFDO2FBQzdCLE9BQU8sQ0FBQywwSEFBMEgsQ0FBQzthQUNuSSxPQUFPLENBQUMsRUFBRSxDQUFDLEVBQUU7WUFDYixFQUFFO2lCQUNBLGNBQWMsQ0FBQyxnQkFBZ0IsQ0FBQyxnQkFBZ0IsQ0FBQztpQkFDakQsUUFBUSxDQUFDLEtBQUssQ0FBQyxFQUFFO2dCQUNqQixJQUFJLENBQUMsUUFBUSxDQUFDLGdCQUFnQixHQUFHLEtBQUssQ0FBQztZQUN4QyxDQUFDLENBQUMsQ0FBQztZQUNKLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxnQkFBZ0IsS0FBSyxnQkFBZ0IsQ0FBQyxnQkFBZ0IsRUFBRTtnQkFDekUsRUFBRSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLGdCQUFnQixDQUFDLENBQUE7YUFDM0M7UUFDRixDQUFDLENBQUM7YUFDRCxTQUFTLENBQUMsR0FBRyxDQUFDLEVBQUU7WUFDaEIsR0FBRztpQkFDRCxPQUFPLENBQUMsT0FBTyxDQUFDO2lCQUNoQixVQUFVLENBQUMseUNBQXlDLENBQUM7aUJBQ3JELE9BQU8sQ0FBQyxHQUFHLENBQUMsRUFBRTtnQkFDZCxJQUFJLENBQUMsUUFBUSxDQUFDLGdCQUFnQixHQUFHLGdCQUFnQixDQUFDLGdCQUFnQixDQUFDO1lBQ3BFLENBQUMsQ0FBQyxDQUFBO1FBQ0osQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDO0NBQ0Q7QUFFRCxNQUFNLG9CQUFxQixTQUFRLHFCQUFxQjtJQUN2RCxZQUFZLFdBQWlDO1FBQzVDLEtBQUssQ0FBQyxXQUFXLENBQUMsQ0FBQztRQUNuQixJQUFJO2FBQ0YsT0FBTyxDQUFDLHVCQUF1QixDQUFDO2FBQ2hDLE9BQU8sQ0FBQyw2REFBNkQsQ0FBQzthQUN0RSxTQUFTLENBQUMsRUFBRSxDQUFDLEVBQUU7WUFDZixFQUFFLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsZUFBZSxDQUFDLENBQUM7WUFDM0MsRUFBRSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsRUFBRTtnQkFDakIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxlQUFlLEdBQUcsRUFBRSxDQUFDLFFBQVEsRUFBRSxDQUFDO1lBQy9DLENBQUMsQ0FBQyxDQUFBO1FBQ0gsQ0FBQyxDQUFDLENBQUM7SUFDSixDQUFDO0NBQ0Y7QUFFRCxNQUFNLGNBQWUsU0FBUSxxQkFBcUI7SUFDakQsWUFBWSxXQUFpQztRQUM1QyxLQUFLLENBQUMsV0FBVyxDQUFDLENBQUM7UUFDbkIsSUFBSTthQUNGLE9BQU8sQ0FBQywrQkFBK0IsQ0FBQzthQUN4QyxPQUFPLENBQUMsOERBQThELENBQUM7YUFDdkUsT0FBTyxDQUFDLEVBQUUsQ0FBQyxFQUFFO1lBQ2IsRUFBRTtpQkFDQSxjQUFjLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxDQUFDO2lCQUN4QyxRQUFRLENBQUMsS0FBSyxDQUFDLEVBQUU7Z0JBQ2pCLElBQUksQ0FBQyxRQUFRLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQztZQUMvQixDQUFDLENBQUMsQ0FBQztZQUNKLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxPQUFPLEtBQUssZ0JBQWdCLENBQUMsT0FBTyxFQUFFO2dCQUN2RCxFQUFFLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUE7YUFDbEM7UUFDRixDQUFDLENBQUM7YUFDRCxTQUFTLENBQUMsR0FBRyxDQUFDLEVBQUU7WUFDaEIsR0FBRztpQkFDRCxPQUFPLENBQUMsT0FBTyxDQUFDO2lCQUNoQixVQUFVLENBQUMsd0NBQXdDLENBQUM7aUJBQ3BELE9BQU8sQ0FBQyxHQUFHLENBQUMsRUFBRTtnQkFDZCxJQUFJLENBQUMsUUFBUSxDQUFDLE9BQU8sR0FBRyxnQkFBZ0IsQ0FBQyxPQUFPLENBQUM7WUFDbEQsQ0FBQyxDQUFDLENBQUE7UUFDSixDQUFDLENBQUMsQ0FBQztJQUNMLENBQUM7Q0FDRDtBQUVELE1BQU0sb0JBQXFCLFNBQVEscUJBQXFCO0lBQ3ZELFlBQVksV0FBaUM7UUFDNUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBQ25CLElBQUk7YUFDRixPQUFPLENBQUMsbUJBQW1CLENBQUM7YUFDNUIsT0FBTyxDQUFDLHNDQUFzQyxDQUFDO2FBQy9DLE9BQU8sQ0FBQyxFQUFFLENBQUMsRUFBRTtZQUNiLEVBQUU7aUJBQ0EsY0FBYyxDQUFDLGdCQUFnQixDQUFDLGlCQUFpQixDQUFDO2lCQUNsRCxRQUFRLENBQUMsS0FBSyxDQUFDLEVBQUU7Z0JBQ2pCLElBQUksQ0FBQyxRQUFRLENBQUMsaUJBQWlCLEdBQUcsS0FBSyxDQUFDO1lBQ3pDLENBQUMsQ0FBQyxDQUFDO1lBQ0osSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLGlCQUFpQixLQUFLLGdCQUFnQixDQUFDLGlCQUFpQixFQUFFO2dCQUMzRSxFQUFFLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsaUJBQWlCLENBQUMsQ0FBQTthQUM1QztRQUNGLENBQUMsQ0FBQzthQUNELFNBQVMsQ0FBQyxHQUFHLENBQUMsRUFBRTtZQUNoQixHQUFHO2lCQUNELE9BQU8sQ0FBQyxPQUFPLENBQUM7aUJBQ2hCLFVBQVUsQ0FBQyx3Q0FBd0MsQ0FBQztpQkFDcEQsT0FBTyxDQUFDLEdBQUcsQ0FBQyxFQUFFO2dCQUNkLElBQUksQ0FBQyxRQUFRLENBQUMsaUJBQWlCLEdBQUcsZ0JBQWdCLENBQUMsaUJBQWlCLENBQUM7WUFDdEUsQ0FBQyxDQUFDLENBQUE7UUFDSixDQUFDLENBQUMsQ0FBQztJQUNMLENBQUM7Q0FDRDtBQUVELE1BQU0sMkJBQTRCLFNBQVEscUJBQXFCO0lBQzlELFlBQVksV0FBaUM7UUFDNUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBQ25CLElBQUk7YUFDRixPQUFPLENBQUMsK0JBQStCLENBQUM7YUFDeEMsT0FBTyxDQUFDLGlEQUFpRCxDQUFDO2FBQzFELE9BQU8sQ0FBQyxFQUFFLENBQUMsRUFBRTtZQUNiLEVBQUU7aUJBQ0EsY0FBYyxDQUFDLGdCQUFnQixDQUFDLHdCQUF3QixDQUFDO2lCQUN6RCxRQUFRLENBQUMsS0FBSyxDQUFDLEVBQUU7Z0JBQ2pCLElBQUksQ0FBQyxRQUFRLENBQUMsd0JBQXdCLEdBQUcsS0FBSyxDQUFDO1lBQ2hELENBQUMsQ0FBQyxDQUFDO1lBQ0osSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLHdCQUF3QixLQUFLLGdCQUFnQixDQUFDLHdCQUF3QixFQUFFO2dCQUN6RixFQUFFLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsd0JBQXdCLENBQUMsQ0FBQTthQUNuRDtRQUNGLENBQUMsQ0FBQzthQUNELFNBQVMsQ0FBQyxHQUFHLENBQUMsRUFBRTtZQUNoQixHQUFHO2lCQUNELE9BQU8sQ0FBQyxPQUFPLENBQUM7aUJBQ2hCLFVBQVUsQ0FBQyxvREFBb0QsQ0FBQztpQkFDaEUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxFQUFFO2dCQUNkLElBQUksQ0FBQyxRQUFRLENBQUMsd0JBQXdCLEdBQUcsZ0JBQWdCLENBQUMsd0JBQXdCLENBQUM7WUFDcEYsQ0FBQyxDQUFDLENBQUE7UUFDSixDQUFDLENBQUMsQ0FBQztJQUNMLENBQUM7Q0FDRDtBQUVELE1BQU0sc0JBQXVCLFNBQVEscUJBQXFCO0lBQ3pELFlBQVksV0FBaUM7UUFDNUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBQ25CLElBQUk7YUFDRixPQUFPLENBQUMscUJBQXFCLENBQUM7YUFDOUIsT0FBTyxDQUFDLHVDQUF1QyxDQUFDO2FBQ2hELE9BQU8sQ0FBQyxFQUFFLENBQUMsRUFBRTtZQUNiLEVBQUU7aUJBQ0EsY0FBYyxDQUFDLGdCQUFnQixDQUFDLG1CQUFtQixDQUFDO2lCQUNwRCxRQUFRLENBQUMsS0FBSyxDQUFDLEVBQUU7Z0JBQ2pCLElBQUksQ0FBQyxRQUFRLENBQUMsbUJBQW1CLEdBQUcsS0FBSyxDQUFDO1lBQzNDLENBQUMsQ0FBQyxDQUFDO1lBQ0osSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLG1CQUFtQixLQUFLLGdCQUFnQixDQUFDLG1CQUFtQixFQUFFO2dCQUMvRSxFQUFFLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsbUJBQW1CLENBQUMsQ0FBQTthQUM5QztRQUNGLENBQUMsQ0FBQzthQUNELFNBQVMsQ0FBQyxHQUFHLENBQUMsRUFBRTtZQUNoQixHQUFHO2lCQUNELE9BQU8sQ0FBQyxPQUFPLENBQUM7aUJBQ2hCLFVBQVUsQ0FBQywwQ0FBMEMsQ0FBQztpQkFDdEQsT0FBTyxDQUFDLEdBQUcsQ0FBQyxFQUFFO2dCQUNkLElBQUksQ0FBQyxRQUFRLENBQUMsbUJBQW1CLEdBQUcsZ0JBQWdCLENBQUMsbUJBQW1CLENBQUM7WUFDMUUsQ0FBQyxDQUFDLENBQUE7UUFDSixDQUFDLENBQUMsQ0FBQztJQUNMLENBQUM7Q0FDRDtBQUVELE1BQU0sMEJBQTJCLFNBQVEscUJBQXFCO0lBQzdELFlBQVksV0FBaUM7UUFDNUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBQ25CLElBQUk7YUFDRixPQUFPLENBQUMsd0JBQXdCLENBQUM7YUFDakMsT0FBTyxDQUFDLDZCQUE2QixDQUFDO2FBQ3RDLE9BQU8sQ0FBQyxFQUFFLENBQUMsRUFBRTtZQUNiLEVBQUU7aUJBQ0EsY0FBYyxDQUFDLGdCQUFnQixDQUFDLGdCQUFnQixDQUFDLFFBQVEsRUFBRSxDQUFDO2lCQUM1RCxRQUFRLENBQUMsS0FBSyxDQUFDLEVBQUU7Z0JBQ2pCLElBQUksQ0FBQyxRQUFRLENBQUMsZ0JBQWdCLEdBQUcsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQ2xELENBQUMsQ0FBQyxDQUFDO1lBQ0osSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLGdCQUFnQixLQUFLLGdCQUFnQixDQUFDLGdCQUFnQixFQUFFO2dCQUN6RSxFQUFFLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsZ0JBQWdCLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQTthQUN0RDtRQUNGLENBQUMsQ0FBQzthQUNELFNBQVMsQ0FBQyxHQUFHLENBQUMsRUFBRTtZQUNoQixHQUFHO2lCQUNELE9BQU8sQ0FBQyxPQUFPLENBQUM7aUJBQ2hCLFVBQVUsQ0FBQyxrQ0FBa0MsQ0FBQztpQkFDOUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxFQUFFO2dCQUNkLElBQUksQ0FBQyxRQUFRLENBQUMsZ0JBQWdCLEdBQUcsZ0JBQWdCLENBQUMsZ0JBQWdCLENBQUM7WUFDcEUsQ0FBQyxDQUFDLENBQUE7UUFDSixDQUFDLENBQUMsQ0FBQztJQUNMLENBQUM7Q0FDRDtBQUVELE1BQU0sT0FBTyxvQkFBcUIsU0FBUSxnQkFBZ0I7SUFHekQsWUFBWSxRQUE0QjtRQUN2QyxLQUFLLENBQUMsUUFBUSxDQUFDLEdBQUcsRUFBRSxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDckMsSUFBSSxDQUFDLFFBQVEsR0FBRyxRQUFRLENBQUM7SUFDMUIsQ0FBQztJQUVELE9BQU87UUFDTixNQUFNLEVBQUUsV0FBVyxFQUFFLEdBQUcsSUFBSSxDQUFDO1FBQzdCLFdBQVcsQ0FBQyxLQUFLLEVBQUUsQ0FBQztRQUNwQixNQUFNLElBQUksR0FBRyxXQUFXLENBQUMsR0FBRyxDQUFDLHNCQUFzQixFQUFFLENBQUE7UUFFckQsSUFBSSxjQUFjLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDekIsSUFBSSxvQkFBb0IsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUMvQixJQUFJLDJCQUEyQixDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3RDLElBQUksc0JBQXNCLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDM0IsSUFBSSxvQkFBb0IsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUNyQyxJQUFJLHVCQUF1QixDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ2xDLElBQUksb0JBQW9CLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDL0IsSUFBSSwwQkFBMEIsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUN0QyxDQUFDO0lBQ0QsSUFBSTtRQUNILElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxFQUFFLENBQUM7SUFDeEIsQ0FBQztDQUNEIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU2V0dGluZywgUGx1Z2luU2V0dGluZ1RhYiB9IGZyb20gXCJvYnNpZGlhblwiO1xyXG5pbXBvcnQgUlNTVHJhY2tlclBsdWdpbiBmcm9tIFwiLi9tYWluXCI7XHJcbmltcG9ydCB7IERFRkFVTFRfU0VUVElOR1MsIFJTU1RyYWNrZXJTZXR0aW5ncyB9IGZyb20gXCIuL3NldHRpbmdzXCI7XHJcblxyXG5hYnN0cmFjdCBjbGFzcyBSU1NUcmFja2VyU2V0dGluZ0Jhc2UgZXh0ZW5kcyBTZXR0aW5nIHtcclxuXHRwcm90ZWN0ZWQgc2V0dGluZ3NUYWI6IFJTU1RyYWNrZXJTZXR0aW5nVGFiO1xyXG5cclxuXHRwcm90ZWN0ZWQgZ2V0IHBsdWdpbigpOiBSU1NUcmFja2VyUGx1Z2luIHtcclxuXHRcdHJldHVybiB0aGlzLnNldHRpbmdzVGFiLnNldHRpbmdzLnBsdWdpbjtcclxuXHR9XHJcblxyXG5cdHByb3RlY3RlZCBnZXQgc2V0dGluZ3MoKSA6IFJTU1RyYWNrZXJTZXR0aW5ncyB7XHJcblx0XHRyZXR1cm4gdGhpcy5zZXR0aW5nc1RhYi5zZXR0aW5ncztcclxuXHR9XHJcblxyXG5cdGNvbnN0cnVjdG9yKHNldHRpbmdzVGFiOiBSU1NUcmFja2VyU2V0dGluZ1RhYikge1xyXG5cdFx0c3VwZXIoc2V0dGluZ3NUYWIuY29udGFpbmVyRWwpO1xyXG5cdFx0dGhpcy5zZXR0aW5nc1RhYiA9IHNldHRpbmdzVGFiO1xyXG5cdH1cclxufVxyXG5cclxuY2xhc3MgUlNTVGFnbWFwTmFtZVNldHRpbmcgZXh0ZW5kcyBSU1NUcmFja2VyU2V0dGluZ0Jhc2Uge1xyXG5cdGNvbnN0cnVjdG9yKHNldHRpbmdzVGFiOiBSU1NUcmFja2VyU2V0dGluZ1RhYikge1xyXG5cdFx0c3VwZXIoc2V0dGluZ3NUYWIpO1xyXG5cdFx0dGhpc1xyXG5cdFx0XHQuc2V0TmFtZSgnUlNTIHRhZyBtYXAgbmFtZScpXHJcblx0XHRcdC5zZXREZXNjKCdUSGUgbmFtZSBvZiB0aGUgdGFnIG1hcCBNYXJrZG93biBmaWxlIGluIHRoZSBSU1MgSG9tZSBmb2xkZXIgd2hpY2ggY29udGFpbnMgYSB0YWJsZSBtYXBwaW5nIHRhZ3MgZm91bmQgaW4gZmVlZHMgdG8gdGFncyBpbiB0aGUgbG9jYWwga25vd2xlZGdlIGdyYXBoLicpXHJcblx0XHRcdC5hZGRUZXh0KHRhID0+IHtcclxuXHRcdFx0XHR0YVxyXG5cdFx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKERFRkFVTFRfU0VUVElOR1MucnNzVGFnbWFwTmFtZSlcclxuXHRcdFx0XHRcdC5vbkNoYW5nZSh2YWx1ZSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMuc2V0dGluZ3MucnNzVGFnbWFwTmFtZSA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0aWYgKHRoaXMuc2V0dGluZ3MucnNzVGFnbWFwTmFtZSAhPT0gREVGQVVMVF9TRVRUSU5HUy5yc3NUYWdtYXBOYW1lKSB7XHJcblx0XHRcdFx0XHR0YS5zZXRWYWx1ZSh0aGlzLnNldHRpbmdzLnJzc1RhZ21hcE5hbWUpXHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KVxyXG5cdFx0XHQuYWRkQnV0dG9uKGJ0biA9PiB7XHJcblx0XHRcdFx0YnRuXHJcblx0XHRcdFx0XHQuc2V0SWNvbihcInJlc2V0XCIpXHJcblx0XHRcdFx0XHQuc2V0VG9vbHRpcChcIlJlc2V0IHRoZSBSU1MgVGFnIE1hcCBuYW1lIHRvIGRlZmF1bHRcIilcclxuXHRcdFx0XHRcdC5vbkNsaWNrKGV2dCA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMuc2V0dGluZ3MucnNzVGFnbWFwTmFtZSA9IERFRkFVTFRfU0VUVElOR1MucnNzVGFnbWFwTmFtZTtcclxuXHRcdFx0XHRcdH0pXHJcblx0XHRcdH0pO1xyXG5cdH1cclxufVxyXG5cclxuY2xhc3MgUlNTRGFzaGJvYXJkTmFtZVNldHRpbmcgZXh0ZW5kcyBSU1NUcmFja2VyU2V0dGluZ0Jhc2Uge1xyXG5cdGNvbnN0cnVjdG9yKHNldHRpbmdzVGFiOiBSU1NUcmFja2VyU2V0dGluZ1RhYikge1xyXG5cdFx0c3VwZXIoc2V0dGluZ3NUYWIpO1xyXG5cdFx0dGhpc1xyXG5cdFx0XHQuc2V0TmFtZSgnUlNTIERhc2hib2FyZCBOYW1lJylcclxuXHRcdFx0LnNldERlc2MoJ1RIZSBuYW1lIG9mIHRoZSBkYXNoYm9hcmQgTWFya2Rvd24gZmlsZSBpbiB0aGUgUlNTIEhvbWUgZm9sZGVyIHdoaWNoIGNvbnRhaW5zIGEgY29udGVudCBtYXAgb2YgdGhlIHN1YnNjcmliZWQgUlNTIGZlZWRzLicpXHJcblx0XHRcdC5hZGRUZXh0KHRhID0+IHtcclxuXHRcdFx0XHR0YVxyXG5cdFx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKERFRkFVTFRfU0VUVElOR1MucnNzRGFzaGJvYXJkTmFtZSlcclxuXHRcdFx0XHRcdC5vbkNoYW5nZSh2YWx1ZSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMuc2V0dGluZ3MucnNzRGFzaGJvYXJkTmFtZSA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0aWYgKHRoaXMuc2V0dGluZ3MucnNzRGFzaGJvYXJkTmFtZSAhPT0gREVGQVVMVF9TRVRUSU5HUy5yc3NEYXNoYm9hcmROYW1lKSB7XHJcblx0XHRcdFx0XHR0YS5zZXRWYWx1ZSh0aGlzLnNldHRpbmdzLnJzc0Rhc2hib2FyZE5hbWUpXHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KVxyXG5cdFx0XHQuYWRkQnV0dG9uKGJ0biA9PiB7XHJcblx0XHRcdFx0YnRuXHJcblx0XHRcdFx0XHQuc2V0SWNvbihcInJlc2V0XCIpXHJcblx0XHRcdFx0XHQuc2V0VG9vbHRpcChcIlJlc2V0IHRoZSBSU1MgZGFzaGJvYXJkIG5hbWUgdG8gZGVmYXVsdFwiKVxyXG5cdFx0XHRcdFx0Lm9uQ2xpY2soZXZ0ID0+IHtcclxuXHRcdFx0XHRcdFx0dGhpcy5zZXR0aW5ncy5yc3NEYXNoYm9hcmROYW1lID0gREVGQVVMVF9TRVRUSU5HUy5yc3NEYXNoYm9hcmROYW1lO1xyXG5cdFx0XHRcdFx0fSlcclxuXHRcdFx0fSk7XHJcblx0fVxyXG59XHJcblxyXG5jbGFzcyBSU1NhdXRvVXBkYXRlU2V0dGluZyBleHRlbmRzIFJTU1RyYWNrZXJTZXR0aW5nQmFzZSB7XHJcblx0Y29uc3RydWN0b3Ioc2V0dGluZ3NUYWI6IFJTU1RyYWNrZXJTZXR0aW5nVGFiKSB7XHJcblx0XHRzdXBlcihzZXR0aW5nc1RhYik7XHJcblx0XHR0aGlzXHJcblx0XHRcdC5zZXROYW1lKCdBdXRvbWF0aWMgUlNTIFVwZGF0ZXMnKVxyXG5cdFx0XHQuc2V0RGVzYygnVHVybiBvbiB0byB1cGRhdGUgUlNTIGZlZWRzIHBlcmlvZGljYWxseSBpbiB0aGUgYmFja2dyb3VuZC4nKVxyXG5cdFx0XHQuYWRkVG9nZ2xlKHRnID0+IHtcclxuXHRcdFx0XHR0Zy5zZXRWYWx1ZSh0aGlzLnNldHRpbmdzLmF1dG9VcGRhdGVGZWVkcyk7XHJcblx0XHRcdFx0dGcub25DaGFuZ2UoZXZ0ID0+IHtcclxuXHRcdFx0XHRcdHRoaXMuc2V0dGluZ3MuYXV0b1VwZGF0ZUZlZWRzID0gdGcuZ2V0VmFsdWUoKTtcclxuXHRcdFx0XHR9KVxyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxufVxyXG5cclxuY2xhc3MgUlNTSG9tZVNldHRpbmcgZXh0ZW5kcyBSU1NUcmFja2VyU2V0dGluZ0Jhc2Uge1xyXG5cdGNvbnN0cnVjdG9yKHNldHRpbmdzVGFiOiBSU1NUcmFja2VyU2V0dGluZ1RhYikge1xyXG5cdFx0c3VwZXIoc2V0dGluZ3NUYWIpO1xyXG5cdFx0dGhpc1xyXG5cdFx0XHQuc2V0TmFtZShcIlJTUyBmZWVkIGJhc2UgKGhvbWUpIGxvY2F0aW9uXCIpXHJcblx0XHRcdC5zZXREZXNjKFwiVGhlIGJhc2UgZm9sZGVyIGNvbnRhaW5pbmcgUlNTIGZlZWRzLCBkYXNoYm9hcmRzIGFuZCBhc3NldHMuXCIpXHJcblx0XHRcdC5hZGRUZXh0KHRhID0+IHtcclxuXHRcdFx0XHR0YVxyXG5cdFx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKERFRkFVTFRfU0VUVElOR1MucnNzSG9tZSlcclxuXHRcdFx0XHRcdC5vbkNoYW5nZSh2YWx1ZSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMuc2V0dGluZ3MucnNzSG9tZSA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0aWYgKHRoaXMuc2V0dGluZ3MucnNzSG9tZSAhPT0gREVGQVVMVF9TRVRUSU5HUy5yc3NIb21lKSB7XHJcblx0XHRcdFx0XHR0YS5zZXRWYWx1ZSh0aGlzLnNldHRpbmdzLnJzc0hvbWUpXHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KVxyXG5cdFx0XHQuYWRkQnV0dG9uKGJ0biA9PiB7XHJcblx0XHRcdFx0YnRuXHJcblx0XHRcdFx0XHQuc2V0SWNvbihcInJlc2V0XCIpXHJcblx0XHRcdFx0XHQuc2V0VG9vbHRpcChcIlJlc2V0IHRoZSBSU1MgaG9tZSBsb2NhdGlvbiB0byBkZWZhdWx0XCIpXHJcblx0XHRcdFx0XHQub25DbGljayhldnQgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnNldHRpbmdzLnJzc0hvbWUgPSBERUZBVUxUX1NFVFRJTkdTLnJzc0hvbWU7XHJcblx0XHRcdFx0XHR9KVxyXG5cdFx0XHR9KTtcclxuXHR9XHJcbn1cclxuXHJcbmNsYXNzIFJTU0ZlZWRGb2xkZXJTZXR0aW5nIGV4dGVuZHMgUlNTVHJhY2tlclNldHRpbmdCYXNlIHtcclxuXHRjb25zdHJ1Y3RvcihzZXR0aW5nc1RhYjogUlNTVHJhY2tlclNldHRpbmdUYWIpIHtcclxuXHRcdHN1cGVyKHNldHRpbmdzVGFiKTtcclxuXHRcdHRoaXNcclxuXHRcdFx0LnNldE5hbWUoXCJSU1MgZmVlZCBsb2NhdGlvblwiKVxyXG5cdFx0XHQuc2V0RGVzYyhcIlRoZSBmb2xkZXIgY29udGFpbmluZyBhbGwgUlNTIGZlZWRzLlwiKVxyXG5cdFx0XHQuYWRkVGV4dCh0YSA9PiB7XHJcblx0XHRcdFx0dGFcclxuXHRcdFx0XHRcdC5zZXRQbGFjZWhvbGRlcihERUZBVUxUX1NFVFRJTkdTLnJzc0ZlZWRGb2xkZXJOYW1lKVxyXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKHZhbHVlID0+IHtcclxuXHRcdFx0XHRcdFx0dGhpcy5zZXR0aW5ncy5yc3NGZWVkRm9sZGVyTmFtZSA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0aWYgKHRoaXMuc2V0dGluZ3MucnNzRmVlZEZvbGRlck5hbWUgIT09IERFRkFVTFRfU0VUVElOR1MucnNzRmVlZEZvbGRlck5hbWUpIHtcclxuXHRcdFx0XHRcdHRhLnNldFZhbHVlKHRoaXMuc2V0dGluZ3MucnNzRmVlZEZvbGRlck5hbWUpXHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KVxyXG5cdFx0XHQuYWRkQnV0dG9uKGJ0biA9PiB7XHJcblx0XHRcdFx0YnRuXHJcblx0XHRcdFx0XHQuc2V0SWNvbihcInJlc2V0XCIpXHJcblx0XHRcdFx0XHQuc2V0VG9vbHRpcChcIlJlc2V0IHRoZSBSU1MgZmVlZCBsb2NhdGlvbiB0byBkZWZhdWx0XCIpXHJcblx0XHRcdFx0XHQub25DbGljayhldnQgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnNldHRpbmdzLnJzc0ZlZWRGb2xkZXJOYW1lID0gREVGQVVMVF9TRVRUSU5HUy5yc3NGZWVkRm9sZGVyTmFtZTtcclxuXHRcdFx0XHRcdH0pXHJcblx0XHRcdH0pO1xyXG5cdH1cclxufVxyXG5cclxuY2xhc3MgUlNTQ29sbGVjdGlvbnNGb2xkZXJTZXR0aW5nIGV4dGVuZHMgUlNTVHJhY2tlclNldHRpbmdCYXNlIHtcclxuXHRjb25zdHJ1Y3RvcihzZXR0aW5nc1RhYjogUlNTVHJhY2tlclNldHRpbmdUYWIpIHtcclxuXHRcdHN1cGVyKHNldHRpbmdzVGFiKTtcclxuXHRcdHRoaXNcclxuXHRcdFx0LnNldE5hbWUoXCJSU1MgZmVlZCBjb2xsZWN0aW9ucyBsb2NhdGlvblwiKVxyXG5cdFx0XHQuc2V0RGVzYyhcIlRoZSBmb2xkZXIgY29udGFpbmluZyBhbGwgUlNTIGZlZWQgY29sbGVjdGlvbnMuXCIpXHJcblx0XHRcdC5hZGRUZXh0KHRhID0+IHtcclxuXHRcdFx0XHR0YVxyXG5cdFx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKERFRkFVTFRfU0VUVElOR1MucnNzQ29sbGVjdGlvbnNGb2xkZXJOYW1lKVxyXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKHZhbHVlID0+IHtcclxuXHRcdFx0XHRcdFx0dGhpcy5zZXR0aW5ncy5yc3NDb2xsZWN0aW9uc0ZvbGRlck5hbWUgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdGlmICh0aGlzLnNldHRpbmdzLnJzc0NvbGxlY3Rpb25zRm9sZGVyTmFtZSAhPT0gREVGQVVMVF9TRVRUSU5HUy5yc3NDb2xsZWN0aW9uc0ZvbGRlck5hbWUpIHtcclxuXHRcdFx0XHRcdHRhLnNldFZhbHVlKHRoaXMuc2V0dGluZ3MucnNzQ29sbGVjdGlvbnNGb2xkZXJOYW1lKVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSlcclxuXHRcdFx0LmFkZEJ1dHRvbihidG4gPT4ge1xyXG5cdFx0XHRcdGJ0blxyXG5cdFx0XHRcdFx0LnNldEljb24oXCJyZXNldFwiKVxyXG5cdFx0XHRcdFx0LnNldFRvb2x0aXAoXCJSZXNldCB0aGUgUlNTIGZlZWQgY29sbGVjdGlvbnMgbG9jYXRpb24gdG8gZGVmYXVsdFwiKVxyXG5cdFx0XHRcdFx0Lm9uQ2xpY2soZXZ0ID0+IHtcclxuXHRcdFx0XHRcdFx0dGhpcy5zZXR0aW5ncy5yc3NDb2xsZWN0aW9uc0ZvbGRlck5hbWUgPSBERUZBVUxUX1NFVFRJTkdTLnJzc0NvbGxlY3Rpb25zRm9sZGVyTmFtZTtcclxuXHRcdFx0XHRcdH0pXHJcblx0XHRcdH0pO1xyXG5cdH1cclxufVxyXG5cclxuY2xhc3MgUlNTVG9waWNzRm9sZGVyU2V0dGluZyBleHRlbmRzIFJTU1RyYWNrZXJTZXR0aW5nQmFzZSB7XHJcblx0Y29uc3RydWN0b3Ioc2V0dGluZ3NUYWI6IFJTU1RyYWNrZXJTZXR0aW5nVGFiKSB7XHJcblx0XHRzdXBlcihzZXR0aW5nc1RhYik7XHJcblx0XHR0aGlzXHJcblx0XHRcdC5zZXROYW1lKFwiUlNTIHRvcGljcyBsb2NhdGlvblwiKVxyXG5cdFx0XHQuc2V0RGVzYyhcIlRoZSBmb2xkZXIgY29udGFpbmluZyBhbGwgUlNTIHRvcGljcy5cIilcclxuXHRcdFx0LmFkZFRleHQodGEgPT4ge1xyXG5cdFx0XHRcdHRhXHJcblx0XHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoREVGQVVMVF9TRVRUSU5HUy5yc3NUb3BpY3NGb2xkZXJOYW1lKVxyXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKHZhbHVlID0+IHtcclxuXHRcdFx0XHRcdFx0dGhpcy5zZXR0aW5ncy5yc3NUb3BpY3NGb2xkZXJOYW1lID0gdmFsdWU7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRpZiAodGhpcy5zZXR0aW5ncy5yc3NUb3BpY3NGb2xkZXJOYW1lICE9PSBERUZBVUxUX1NFVFRJTkdTLnJzc1RvcGljc0ZvbGRlck5hbWUpIHtcclxuXHRcdFx0XHRcdHRhLnNldFZhbHVlKHRoaXMuc2V0dGluZ3MucnNzVG9waWNzRm9sZGVyTmFtZSlcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pXHJcblx0XHRcdC5hZGRCdXR0b24oYnRuID0+IHtcclxuXHRcdFx0XHRidG5cclxuXHRcdFx0XHRcdC5zZXRJY29uKFwicmVzZXRcIilcclxuXHRcdFx0XHRcdC5zZXRUb29sdGlwKFwiUmVzZXQgdGhlIFJTUyB0b3BpY3MgbG9jYXRpb24gdG8gZGVmYXVsdFwiKVxyXG5cdFx0XHRcdFx0Lm9uQ2xpY2soZXZ0ID0+IHtcclxuXHRcdFx0XHRcdFx0dGhpcy5zZXR0aW5ncy5yc3NUb3BpY3NGb2xkZXJOYW1lID0gREVGQVVMVF9TRVRUSU5HUy5yc3NUb3BpY3NGb2xkZXJOYW1lO1xyXG5cdFx0XHRcdFx0fSlcclxuXHRcdFx0fSk7XHJcblx0fVxyXG59XHJcblxyXG5jbGFzcyBSU1NEZWZhdWx0SXRlbUxpbWl0U2V0dGluZyBleHRlbmRzIFJTU1RyYWNrZXJTZXR0aW5nQmFzZSB7XHJcblx0Y29uc3RydWN0b3Ioc2V0dGluZ3NUYWI6IFJTU1RyYWNrZXJTZXR0aW5nVGFiKSB7XHJcblx0XHRzdXBlcihzZXR0aW5nc1RhYik7XHJcblx0XHR0aGlzXHJcblx0XHRcdC5zZXROYW1lKFwiRGVmYXVsdCBSU1MgaXRlbSBsaW1pdFwiKVxyXG5cdFx0XHQuc2V0RGVzYyhcIlRoZSBtYXhpbXVtIGl0ZW1zIHBlciBmZWVkLlwiKVxyXG5cdFx0XHQuYWRkVGV4dCh0YSA9PiB7XHJcblx0XHRcdFx0dGFcclxuXHRcdFx0XHRcdC5zZXRQbGFjZWhvbGRlcihERUZBVUxUX1NFVFRJTkdTLmRlZmF1bHRJdGVtTGltaXQudG9TdHJpbmcoKSlcclxuXHRcdFx0XHRcdC5vbkNoYW5nZSh2YWx1ZSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMuc2V0dGluZ3MuZGVmYXVsdEl0ZW1MaW1pdCA9IHBhcnNlSW50KHZhbHVlKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdGlmICh0aGlzLnNldHRpbmdzLmRlZmF1bHRJdGVtTGltaXQgIT09IERFRkFVTFRfU0VUVElOR1MuZGVmYXVsdEl0ZW1MaW1pdCkge1xyXG5cdFx0XHRcdFx0dGEuc2V0VmFsdWUodGhpcy5zZXR0aW5ncy5kZWZhdWx0SXRlbUxpbWl0LnRvU3RyaW5nKCkpXHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KVxyXG5cdFx0XHQuYWRkQnV0dG9uKGJ0biA9PiB7XHJcblx0XHRcdFx0YnRuXHJcblx0XHRcdFx0XHQuc2V0SWNvbihcInJlc2V0XCIpXHJcblx0XHRcdFx0XHQuc2V0VG9vbHRpcChcIlJlc2V0IHRoZSBSU1MgaXRlbSBsaW1pdCBkZWZhdWx0XCIpXHJcblx0XHRcdFx0XHQub25DbGljayhldnQgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnNldHRpbmdzLmRlZmF1bHRJdGVtTGltaXQgPSBERUZBVUxUX1NFVFRJTkdTLmRlZmF1bHRJdGVtTGltaXQ7XHJcblx0XHRcdFx0XHR9KVxyXG5cdFx0XHR9KTtcclxuXHR9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBSU1NUcmFja2VyU2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xyXG5cdHNldHRpbmdzOiBSU1NUcmFja2VyU2V0dGluZ3M7XHJcblxyXG5cdGNvbnN0cnVjdG9yKHNldHRpbmdzOiBSU1NUcmFja2VyU2V0dGluZ3MpIHtcclxuXHRcdHN1cGVyKHNldHRpbmdzLmFwcCwgc2V0dGluZ3MucGx1Z2luKTtcclxuXHRcdHRoaXMuc2V0dGluZ3MgPSBzZXR0aW5ncztcclxuXHR9XHJcblxyXG5cdGRpc3BsYXkoKTogdm9pZCB7XHJcblx0XHRjb25zdCB7IGNvbnRhaW5lckVsIH0gPSB0aGlzO1xyXG5cdFx0Y29udGFpbmVyRWwuZW1wdHkoKTtcclxuXHRcdGNvbnN0IGZyYWcgPSBjb250YWluZXJFbC5kb2MuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpXHJcblxyXG5cdFx0bmV3IFJTU0hvbWVTZXR0aW5nKHRoaXMpO1xyXG5cdFx0bmV3IFJTU0ZlZWRGb2xkZXJTZXR0aW5nKHRoaXMpO1xyXG5cdFx0bmV3IFJTU0NvbGxlY3Rpb25zRm9sZGVyU2V0dGluZyh0aGlzKTtcclxuXHRcdG5ldyBSU1NUb3BpY3NGb2xkZXJTZXR0aW5nKHRoaXMpO1xyXG4gICAgICAgIG5ldyBSU1NhdXRvVXBkYXRlU2V0dGluZyh0aGlzKTtcclxuXHRcdG5ldyBSU1NEYXNoYm9hcmROYW1lU2V0dGluZyh0aGlzKTtcclxuXHRcdG5ldyBSU1NUYWdtYXBOYW1lU2V0dGluZyh0aGlzKTtcclxuXHRcdG5ldyBSU1NEZWZhdWx0SXRlbUxpbWl0U2V0dGluZyh0aGlzKTtcclxuXHR9XHJcblx0aGlkZSgpIHtcclxuXHRcdHRoaXMuc2V0dGluZ3MuY29tbWl0KCk7XHJcblx0fVxyXG59Il19